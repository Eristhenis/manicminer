<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Manic Miner: Routine at 37173</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="37125.html">37125</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#37173">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="37403.html">37403</a></span></td>
</tr>
</table>
<div class="description">37173: Move and draw the Kong Beast in the current cavern</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="34574.html">34574</a>.
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37173"></a>37173</td>
<td class="instruction">LD HL,23558</td>
<td class="comment-11" rowspan="2">Flip the left-hand switch at (0,6) if Willy is touching it</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37176"></a>37176</td>
<td class="instruction">CALL <a class="link" href="37403.html">37403</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37179"></a>37179</td>
<td class="instruction">LD A,(32987)</td>
<td class="comment-11" rowspan="1">Pick up the Kong Beast's status from <a class="link" href="32987.html">32987</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37182"></a>37182</td>
<td class="instruction">CP 2</td>
<td class="comment-11" rowspan="1">Is the Kong Beast already dead?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37184"></a>37184</td>
<td class="instruction">RET Z</td>
<td class="comment-11" rowspan="1">Return if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37185"></a>37185</td>
<td class="instruction">LD A,(29958)</td>
<td class="comment-11" rowspan="1">Pick up the sixth pixel row of the left-hand switch from the screen buffer at <a class="link" href="28672.html">28672</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37188"></a>37188</td>
<td class="instruction">CP 16</td>
<td class="comment-11" rowspan="1">Has the switch been flipped?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37190"></a>37190</td>
<td class="instruction">JP Z,<a class="link" href="37173.html#37369">37369</a></td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="37193"></a>
<div class="comments">
<div class="paragraph">
The left-hand switch has been flipped. Deal with opening up the wall if that is still in progress.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37193"></a>37193</td>
<td class="instruction">LD A,(24433)</td>
<td class="comment-11" rowspan="1">Pick up the attribute byte of the tile at (11,17) in the buffer at <a class="link" href="24064.html">24064</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37196"></a>37196</td>
<td class="instruction">OR A</td>
<td class="comment-11" rowspan="1">Has the wall there been removed yet?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37197"></a>37197</td>
<td class="instruction">JR Z,<a class="link" href="37173.html#37238">37238</a></td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37199"></a>37199</td>
<td class="instruction">LD HL,32625</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the bottom row of pixels of the wall tile at (11,17) in the screen buffer at <a class="link" href="28672.html">28672</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37202"></a>37202</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up a pixel row</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37203"></a>37203</td>
<td class="instruction">OR A</td>
<td class="comment-11" rowspan="1">Is it blank yet?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37204"></a>37204</td>
<td class="instruction">JR NZ,<a class="link" href="37173.html#37228">37228</a></td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37206"></a>37206</td>
<td class="instruction">DEC H</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the next pixel row up</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37207"></a>37207</td>
<td class="instruction">LD A,H</td>
<td class="comment-11" rowspan="2">Have we checked all 8 pixel rows yet?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37208"></a>37208</td>
<td class="instruction">CP 119</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37210"></a>37210</td>
<td class="instruction">JR NZ,<a class="link" href="37173.html#37202">37202</a></td>
<td class="comment-11" rowspan="1">If not, jump back to check the next one</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37212"></a>37212</td>
<td class="instruction">LD A,(32800)</td>
<td class="comment-11" rowspan="1">Pick up the attribute byte of the background tile for the current cavern from <a class="link" href="32800.html">32800</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37215"></a>37215</td>
<td class="instruction">LD (24433),A</td>
<td class="comment-11" rowspan="2">Change the attributes at (11,17) and (12,17) in the buffer at <a class="link" href="24064.html">24064</a> to match the background tile (the wall there is now gone)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37218"></a>37218</td>
<td class="instruction">LD (24465),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37221"></a>37221</td>
<td class="instruction">LD A,114</td>
<td class="comment-11" rowspan="2">Update the seventh byte of the guardian definition at <a class="link" href="32958.html#32965">32965</a> so that the guardian moves through the opening in the wall</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37223"></a>37223</td>
<td class="instruction">LD (32971),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37226"></a>37226</td>
<td class="instruction">JR <a class="link" href="37173.html#37238">37238</a></td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37228"></a>37228</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-11" rowspan="1">Clear a pixel row of the wall tile at (11,17) in the screen buffer at <a class="link" href="28672.html">28672</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37230"></a>37230</td>
<td class="instruction">LD L,145</td>
<td class="comment-11" rowspan="4">Point <span class="register">HL</span> at the opposite pixel row of the wall tile one cell down at (12,17)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37232"></a>37232</td>
<td class="instruction">LD A,H</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37233"></a>37233</td>
<td class="instruction">XOR 7</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37235"></a>37235</td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37236"></a>37236</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-11" rowspan="1">Clear that pixel row as well</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="37238"></a>
<div class="comments">
<div class="paragraph">
Now check the right-hand switch.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37238"></a>37238</td>
<td class="instruction">LD HL,23570</td>
<td class="comment-11" rowspan="2">Flip the right-hand switch at (0,18) if Willy is touching it (and it hasn't already been flipped)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37241"></a>37241</td>
<td class="instruction">CALL <a class="link" href="37403.html">37403</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37244"></a>37244</td>
<td class="instruction">JR NZ,<a class="link" href="37173.html#37277">37277</a></td>
<td class="comment-11" rowspan="1">Jump if the switch was not flipped</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37246"></a>37246</td>
<td class="instruction">XOR A</td>
<td class="comment-11" rowspan="2">Initialise the Kong Beast's pixel y-coordinate at <a class="link" href="32988.html">32988</a> to 0</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37247"></a>37247</td>
<td class="instruction">LD (32988),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37250"></a>37250</td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="2">Update the Kong Beast's status at <a class="link" href="32987.html">32987</a> to 1: he is falling</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37251"></a>37251</td>
<td class="instruction">LD (32987),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37254"></a>37254</td>
<td class="instruction">LD A,(32800)</td>
<td class="comment-11" rowspan="1">Pick up the attribute byte of the background tile for the current cavern from <a class="link" href="32800.html">32800</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37257"></a>37257</td>
<td class="instruction">LD (24143),A</td>
<td class="comment-11" rowspan="2">Change the attributes of the floor beneath the Kong Beast in the buffer at <a class="link" href="24064.html">24064</a> to match that of the background tile</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37260"></a>37260</td>
<td class="instruction">LD (24144),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37263"></a>37263</td>
<td class="instruction">LD HL,28751</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at (2,15) in the screen buffer at <a class="link" href="28672.html">28672</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37266"></a>37266</td>
<td class="instruction">LD B,8</td>
<td class="comment-11" rowspan="7">Clear the cells at (2,15) and (2,16), removing the floor beneath the Kong Beast</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37268"></a>37268</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37270"></a>37270</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37271"></a>37271</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37273"></a>37273</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37274"></a>37274</td>
<td class="instruction">INC H</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37275"></a>37275</td>
<td class="instruction">DJNZ <a class="link" href="37173.html#37268">37268</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37277"></a>37277</td>
<td class="instruction">LD A,(32987)</td>
<td class="comment-11" rowspan="1">Pick up the Kong Beast's status from <a class="link" href="32987.html">32987</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37280"></a>37280</td>
<td class="instruction">OR A</td>
<td class="comment-11" rowspan="1">Is the Kong Beast still on the ledge?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37281"></a>37281</td>
<td class="instruction">JR Z,<a class="link" href="37173.html#37369">37369</a></td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="37283"></a>
<div class="comments">
<div class="paragraph">
The Kong Beast is falling.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37283"></a>37283</td>
<td class="instruction">LD A,(32988)</td>
<td class="comment-11" rowspan="1">Pick up the Kong Beast's pixel y-coordinate from <a class="link" href="32988.html">32988</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37286"></a>37286</td>
<td class="instruction">CP 100</td>
<td class="comment-11" rowspan="1">Has he fallen into the portal yet?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37288"></a>37288</td>
<td class="instruction">JR Z,<a class="link" href="37173.html#37363">37363</a></td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37290"></a>37290</td>
<td class="instruction">ADD A,4</td>
<td class="comment-11" rowspan="2">Add 4 to the Kong Beast's pixel y-coordinate at <a class="link" href="32988.html">32988</a> (moving him downwards)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37292"></a>37292</td>
<td class="instruction">LD (32988),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37295"></a>37295</td>
<td class="instruction">LD C,A</td>
<td class="comment-11" rowspan="1">Copy the pixel y-coordinate to <span class="register">C</span>; this value determines the pitch of the sound effect</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37296"></a>37296</td>
<td class="instruction">LD D,16</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=16; this value determines the duration of the sound effect</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37298"></a>37298</td>
<td class="instruction">LD A,(32883)</td>
<td class="comment-11" rowspan="1">Pick up the border colour for the current cavern from <a class="link" href="32883.html">32883</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37301"></a>37301</td>
<td class="instruction">OUT (254),A</td>
<td class="comment-11" rowspan="6">Make a falling sound effect</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37303"></a>37303</td>
<td class="instruction">XOR 24</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37305"></a>37305</td>
<td class="instruction">LD B,C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37306"></a>37306</td>
<td class="instruction">DJNZ <a class="link" href="37173.html#37306">37306</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37308"></a>37308</td>
<td class="instruction">DEC D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37309"></a>37309</td>
<td class="instruction">JR NZ,<a class="link" href="37173.html#37301">37301</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37311"></a>37311</td>
<td class="instruction">LD A,C</td>
<td class="comment-11" rowspan="1">Copy the Kong Beast's pixel y-coordinate back into <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37312"></a>37312</td>
<td class="instruction">RLCA</td>
<td class="comment-11" rowspan="3">Point <span class="register">DE</span> at the entry in the screen buffer address lookup table at <a class="link" href="33536.html">33536</a> that corresponds to the Kong Beast's pixel y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37313"></a>37313</td>
<td class="instruction">LD E,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37314"></a>37314</td>
<td class="instruction">LD D,131</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37316"></a>37316</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-11" rowspan="6">Point <span class="register">HL</span> at the address of the Kong Beast's location in the screen buffer at <a class="link" href="24576.html">24576</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37317"></a>37317</td>
<td class="instruction">OR 15</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37319"></a>37319</td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37320"></a>37320</td>
<td class="instruction">INC DE</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37321"></a>37321</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37322"></a>37322</td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37323"></a>37323</td>
<td class="instruction">LD D,129</td>
<td class="comment-11" rowspan="5">Use bit 5 of the value of the game clock at <a class="link" href="32957.html">32957</a> (which is toggled once every eight passes through the main loop) to point <span class="register">DE</span> at the graphic data for the appropriate Kong Beast sprite</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37325"></a>37325</td>
<td class="instruction">LD A,(32957)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37328"></a>37328</td>
<td class="instruction">AND 32</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37330"></a>37330</td>
<td class="instruction">OR 64</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37332"></a>37332</td>
<td class="instruction">LD E,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37333"></a>37333</td>
<td class="instruction">LD C,0</td>
<td class="comment-11" rowspan="2">Draw the Kong Beast to the screen buffer at <a class="link" href="24576.html">24576</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37335"></a>37335</td>
<td class="instruction">CALL <a class="link" href="36852.html">36852</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37338"></a>37338</td>
<td class="instruction">LD HL,33836</td>
<td class="comment-11" rowspan="2">Add 100 to the score</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37341"></a>37341</td>
<td class="instruction">CALL <a class="link" href="37098.html#37118">37118</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37344"></a>37344</td>
<td class="instruction">LD A,(32988)</td>
<td class="comment-11" rowspan="1">Pick up the Kong Beast's pixel y-coordinate from <a class="link" href="32988.html">32988</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37347"></a>37347</td>
<td class="instruction">AND 120</td>
<td class="comment-11" rowspan="8">Point <span class="register">HL</span> at the address of the Kong Beast's location in the attribute buffer at <a class="link" href="23552.html">23552</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37349"></a>37349</td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37350"></a>37350</td>
<td class="instruction">LD H,23</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37352"></a>37352</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37353"></a>37353</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37354"></a>37354</td>
<td class="instruction">LD A,L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37355"></a>37355</td>
<td class="instruction">OR 15</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37357"></a>37357</td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37358"></a>37358</td>
<td class="instruction">LD A,6</td>
<td class="comment-11" rowspan="1">The Kong Beast is drawn with yellow INK</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37360"></a>37360</td>
<td class="instruction">JP <a class="link" href="36344.html#36447">36447</a></td>
<td class="comment-11" rowspan="1">Set the attribute bytes for the Kong Beast</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="37363"></a>
<div class="comments">
<div class="paragraph">
The Kong Beast has fallen into the portal.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37363"></a>37363</td>
<td class="instruction">LD A,2</td>
<td class="comment-11" rowspan="2">Set the Kong Beast's status at <a class="link" href="32987.html">32987</a> to 2: he is dead</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37365"></a>37365</td>
<td class="instruction">LD (32987),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37368"></a>37368</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="37369"></a>
<div class="comments">
<div class="paragraph">
The Kong Beast is still on the ledge.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="37369"></a>37369</td>
<td class="instruction">LD A,(32957)</td>
<td class="comment-11" rowspan="1">Pick up the value of the game clock at <a class="link" href="32957.html">32957</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37372"></a>37372</td>
<td class="instruction">AND 32</td>
<td class="comment-11" rowspan="3">Use bit 5 of this value (which is toggled once every eight passes through the main loop) to point <span class="register">DE</span> at the graphic data for the appropriate Kong Beast sprite</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37374"></a>37374</td>
<td class="instruction">LD E,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37375"></a>37375</td>
<td class="instruction">LD D,129</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37377"></a>37377</td>
<td class="instruction">LD HL,24591</td>
<td class="comment-11" rowspan="3">Draw the Kong Beast at (0,15) in the screen buffer at <a class="link" href="24576.html">24576</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37380"></a>37380</td>
<td class="instruction">LD C,1</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37382"></a>37382</td>
<td class="instruction">CALL <a class="link" href="36852.html">36852</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37385"></a>37385</td>
<td class="instruction">JP NZ,<a class="link" href="36101.html#36102">36102</a></td>
<td class="comment-11" rowspan="1">Kill Willy if he collided with the Kong Beast</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37388"></a>37388</td>
<td class="instruction">LD A,68</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=68 (INK 4: PAPER 0: BRIGHT 1)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37390"></a>37390</td>
<td class="instruction">LD (23599),A</td>
<td class="comment-11" rowspan="4">Set the attribute bytes for the Kong Beast in the buffer at <a class="link" href="23552.html">23552</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37393"></a>37393</td>
<td class="instruction">LD (23600),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37396"></a>37396</td>
<td class="instruction">LD (23567),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37399"></a>37399</td>
<td class="instruction">LD (23568),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="37402"></a>37402</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="37125.html">37125</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#37173">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="37403.html">37403</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Manic Miner RAM disassembly 20141004</div>
<div class="copyright">&#169; 1983 Bug-Byte Ltd (Manic Miner). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.1.1.</div>
</div>
</body>
</html>